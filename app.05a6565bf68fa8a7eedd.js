(()=>{var t={933:()=>{!function(){const t=document.querySelector(".app__main-actions-mobile-wrapper"),e=t.querySelector(".app__main-actions-mobile-menu-button"),o=t.querySelector(".app__main-actions-mobile"),n=t.querySelector(".app__main-actions-mobile-backdrop");function a(){document.querySelector("[data-recolored-text]").classList.toggle("app__main-actions-mobile-title-span--is-recolored")}t.addEventListener("click",(t=>{t.target===e&&(e.classList.toggle("app__main-actions-mobile-menu-button--is-clicked"),o.classList.toggle("app__main-actions-mobile--is-shown"),n.classList.toggle("app__main-actions-mobile-backdrop--is-active"),a()),o.classList.contains("app__main-actions-mobile--is-shown")&&t.target===n&&(e.classList.toggle("app__main-actions-mobile-menu-button--is-clicked"),o.classList.toggle("app__main-actions-mobile--is-shown"),n.classList.toggle("app__main-actions-mobile-backdrop--is-active"),a())}))}()},54:()=>{function t(t){document.querySelector(t).classList.remove("no-transition")}window.addEventListener("load",(()=>{t(".footer__show-settings-button"),t(".footer__show-contacts-button"),t(".footer__settings"),t(".footer__contacts")}))},423:()=>{const t=document.querySelector("input#font-size"),e=document.querySelector(".footer__show-settings-button"),o=document.querySelector(".footer__settings-wrapper"),n=document.querySelector(".footer__settings"),a=document.querySelector(".footer__show-contacts-button"),i=document.querySelector(".footer__contacts-wrapper"),s=document.querySelector(".footer__contacts");function l(t){const e=(t.value-t.min)/(t.max-t.min)*100,o=getComputedStyle(document.body).getPropertyValue("--color-accent");t.style.background=`linear-gradient(to right, ${o} `+e+"%, transparent "+e+"%)"}function c(t,e,o){t.addEventListener("click",(()=>{!e.classList.contains("block--is-visible")&&window.matchMedia("(min-width: 481px) and (max-width: 670px)").matches&&o.classList.add("block--is-hidden"),e.classList.contains("block--is-visible")&&window.matchMedia("(min-width: 481px) and (max-width: 670px)").matches&&o.classList.remove("block--is-hidden"),!e.classList.contains("block--is-visible")&&window.matchMedia("(min-width: 320px) and (max-width: 480px)").matches&&(e.classList.add("has-top-100-percents"),e.matches(".footer__settings")&&i.classList.add("footer__contacts-wrapper--has-margin-top")),e.classList.contains("block--is-visible")&&window.matchMedia("(min-width: 320px) and (max-width: 480px)").matches&&(e.classList.remove("has-top-100-percents"),e.matches(".footer__settings")&&i.classList.remove("footer__contacts-wrapper--has-margin-top")),e.classList.toggle("block--is-visible")}))}function r(t,e,o){document.documentElement.addEventListener("click",(n=>{e.contains(n.target)||t.contains(n.target)||e.classList.remove("block--is-visible"),!window.matchMedia("(min-width: 481px) and (max-width: 670px)").matches||e.contains(n.target)||t.contains(n.target)||o.classList.remove("block--is-hidden"),!window.matchMedia("(min-width: 320px) and (max-width: 480px)").matches||e.contains(n.target)||t.contains(n.target)||(e.classList.remove("has-top-100-percents"),e.matches(".footer__settings")&&i.classList.remove("footer__contacts-wrapper--has-margin-top"))}))}!function(t){const e=document.querySelector(".settings__font-size-value"),o=localStorage.getItem("font-size");function n(t,e,o){e.textContent=t.value,l(t),document.body.style.setProperty("--font-size",`${o}px`)}o&&(t.value=o,n(t,e,o)),t.addEventListener("input",(()=>{n(t,e,t.value),16==t.value?localStorage.removeItem("font-size"):localStorage.setItem("font-size",t.value)}))}(t),l(t),function(){const t=document.querySelector("input#theme-color");localStorage.getItem("theme-color")&&(document.body.classList.add("white-theme"),t.checked=!0),t.addEventListener("change",(()=>{t.checked?(localStorage.setItem("theme-color","white"),document.body.classList.add("white-theme")):(localStorage.removeItem("theme-color"),document.body.classList.remove("white-theme"))}))}(),c(e,n,i),c(a,s,o),r(e,n,i),r(a,s,o)}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{"use strict";function t(){let t="client";return"админ"===e().getItem("online").slice(-5)&&(t="admin"),t}function e(){let t=localStorage;return sessionStorage.getItem("online")&&(t=sessionStorage),t}function n(){document.body.style.overflow="hidden"}function a(){document.body.style.overflow=""}function i(t,e){function o(e){const n=document.querySelector(".modal[open]");"Escape"===e.code&&n!==t&&(t.remove(),a(),document.removeEventListener("keyup",o))}document.addEventListener("keyup",o),t.addEventListener("click",(e=>{let{currentTarget:n,target:i}=e;i===n&&(t.remove(),a(),document.removeEventListener("keyup",o))})),e.addEventListener("click",(()=>{t.remove(),a(),document.removeEventListener("keyup",o)}))}function s(t,e,o,n){e.forEach((t=>{t.classList.contains("form__field-control--is-invalid")&&t.classList.remove("form__field-control--is-invalid")})),o.forEach((t=>{t.textContent.length>0&&(t.textContent="")})),t.reset(),n.classList.contains("notification-animation")&&n.classList.remove("notification-animation"),n.textContent.length>0&&(n.textContent="")}!function(){const t=e().getItem("online"),o=JSON.parse(localStorage.getItem(t))||JSON.parse(sessionStorage.getItem(t));document.title+=`${o["name-registration"]} ${String.fromCodePoint(128526)}`}();o(54);const l=o.p+"img/3af53bf974dafb47033c.png",c=o.p+"img/355c48054ba9788b039b.png",r=o.p+"img/c1825fe7c155a6d5e2a4.png",d=o.p+"img/5c53a4897e16590b9e78.png",m=o.p+"img/6fa84ed0564f4ac19473.png",u=o.p+"img/58ab6e74b76fff08ff9d.png",p=o.p+"img/a276317bd882c296eea5.png",h={beardIcon:l,boyIcon:c,camoIcon:r,complexIcon:d,haircutIcon:m,manIcon:u,womanIcon:p},f=[{name:"Никита",surname:"Майоров",experience:"1 год",image:u,id:1},{name:"Андрей",surname:"Яковлев",experience:"2 года",image:u,id:2},{name:"Алиса",surname:"Фомичева",experience:"6 мес",image:p,id:3},{name:"Дарья",surname:"Лаврентьева",experience:"5 лет",image:p,id:4}],g=[{name:"Мужская стрижка",price:"1500",image:m,id:5},{name:"Детская стрижка",price:"750",image:c,id:6},{name:"Оформление бороды",price:"800",image:l,id:7},{name:"Комплекс",price:"2000",image:d,id:8},{name:"Камуфляж седины",price:"1000",image:r,id:9}];!function(){const t=document.querySelector(".time-and-date__time-hours"),e=document.querySelector(".time-and-date__time-minutes");function o(t,e){const o=new Date;o.getHours()<10?t.textContent=`0${o.getHours()}`:t.textContent=o.getHours(),o.getMinutes()<10?e.textContent=`0${o.getMinutes()}`:e.textContent=o.getMinutes(),0===o.getHours()&&0===o.getMinutes()&&n(o)}function n(t){document.querySelector(".time-and-date__date").textContent=t.toLocaleDateString("ru",{day:"numeric",month:"long",year:"numeric"})}o(t,e),n(new Date),setInterval(o,1e3,t,e)}(),function(e){let{phoneNumber:o,address:n,linkToAddressIn2gis:a}=e;const i=document.querySelector(".aside__contacts");if("client"===t()){if(i.innerHTML=`\n\t\t\t<a href=${a} target="_blank" title="Местоположение в 2ГИС" class="aside__contacts-address">${n}</a>\n\t\t\t<a href="tel:+${+o.replaceAll("-","")}" class="aside__contacts-phone">${o}</a>\n\t\t`,window.matchMedia("(min-width: 768px)").matches){document.querySelector(".aside__contacts-phone").addEventListener("click",(t=>{t.preventDefault()}))}}else i.innerHTML=`\n\t\t\t<div class="aside__contacts-address aside__contacts-address--has-cursor-default">${n}</div>\n\t\t\t<div class="aside__contacts-phone">${o}</div>\n\t\t`}({phoneNumber:"8-999-999-99-99",address:"пр. Ленина, 111в",linkToAddressIn2gis:"https://2gis.ru/magnitogorsk/geo/3659810352402709?m=58.992316%2C53.379106%2F17.55"});o(933);function S(t,e,o){const n=document.querySelector(t);n.classList.contains("notification--error")?n.classList.remove("notification--error"):n.classList.contains("notification--success")&&n.classList.remove("notification--success"),n.classList.contains("notification-animation")&&(n.classList.remove("notification-animation"),n.offsetWidth),n.textContent=e,n.classList.add(`notification--${o}`,"notification-animation")}class v{constructor(t){this.dbObject=t}createMainModal(){const{modal:t,modalDivForScroll:e,modalContent:o,modalTitle:n,modalList:a,modalCloseButton:i}=this.createMainModalStructure();return this.setMainModalAttr(t),this.createMainModalListItems(this.dbObject,a),1===a.children.length&&(a.style.display="block"),this.setMainModalTitle(n),o.append(n,a,i),e.append(o),t.append(e),t}createMainModalStructure(){const t=document.createElement("dialog"),e=document.createElement("div"),o=document.createElement("div"),n=document.createElement("h2"),a=document.createElement("ul"),i=document.createElement("button");return t.classList.add("app__modal","modal"),e.classList.add("modal__content-wrapper"),o.classList.add("modal__content"),n.classList.add("visually-hidden"),a.classList.add("modal__content-list","content-list"),i.classList.add("modal__content-close-button"),i.setAttribute("type","button"),i.setAttribute("data-action-button","close"),i.innerHTML='\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path fill="#010101" fill-rule="evenodd" d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960S64 759.4 64 512S264.6 64 512 64m0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372m128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254L384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019a.199.199 0 0 1-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"/></svg>\n\t\t\t\t',{modal:t,modalDivForScroll:e,modalContent:o,modalTitle:n,modalList:a,modalCloseButton:i}}setMainModalAttr(t){t.setAttribute("data-modal","masters")}createMainModalListItems(t,o){const n=JSON.parse(e().getItem("deletedMasters")),a=JSON.parse(e().getItem("addedMasters"));for(let e=0;e<t.length;e++){let a=!1;if(n)for(let o=0;o<n.length;o++)if(`${t[e].name} ${t[e].surname}`===n[o]){a=!0;break}a||this.createMainModalListItem(t,o,e)}if(a)for(let t=0;t<a.length;t++)this.createMainModalListItem(a,o,t)}createMainModalListItem(t,e,o){const n=document.createElement("li");n.classList.add("content-list-item","content-list-item--grid"),n.setAttribute("data-value",t[o].id),this.createMainModalListItemStructure(t,n,o),e.append(n)}createMainModalListItemStructure(t,e,o){e.innerHTML=`\n\t\t\t<div class="content-list-item__text">\n\t\t\t\t<span>${t[o].name} ${t[o].surname}</span>\n\t\t\t\t<div>\n\t\t\t\t\t<span>Стаж работы: </span>\n\t\t\t\t\t<span>${t[o].experience}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<img src="${t[o].image}" alt="Фотография мастера" />\n\t\t`}setMainModalTitle(t){t.textContent="Мастера"}showMainModal(){const t=this.createMainModal(),e=t.querySelector("[data-action-button='close']");0===t.querySelector("ul").children.length?this.createAndShowMainModalNotification():(document.body.append(t),t.showModal(),n(),this.calculateHeightMainModal(t),this.closeMainModal(t,e))}createAndShowMainModalNotification(){S("[data-notification='body']","Мастера отсутствуют","error")}calculateHeightMainModal(t){const e=t.querySelector("ul"),o=e.closest("div"),n=e.querySelectorAll("li"),a=getComputedStyle(e).gap;let i=0,s=0,l=0;window.matchMedia("(max-width: 767px)").matches?(n.forEach((t=>{i+=parseFloat(getComputedStyle(t).height)})),s=(n.length-1)*parseFloat(a)):(n.forEach(((t,e)=>{e<Math.ceil(n.length/2)&&(i+=parseFloat(getComputedStyle(t).height))})),s=n.length%2==0?(n.length/2-1)*parseFloat(a):Math.floor(n.length/2)*parseFloat(a)),l=2*parseFloat(getComputedStyle(o).paddingTop),t.style.height=`${i+s+l}px`}closeMainModal(t,e){i(t,e)}}class M extends v{constructor(t){super(t)}setMainModalAttr(t){t.setAttribute("data-modal","services")}createMainModalListItems(t,o){const n=JSON.parse(e().getItem("deletedServices")),a=JSON.parse(e().getItem("addedServices"));for(let e=0;e<t.length;e++){let a=!1;if(n)for(let o=0;o<n.length;o++)if(t[e].name===n[o]){a=!0;break}a||this.createMainModalListItem(t,o,e)}if(a)for(let t=0;t<a.length;t++)this.createMainModalListItem(a,o,t)}createMainModalListItemStructure(t,e,o){e.innerHTML=`\n\t\t\t<div class="content-list-item__text">\n\t\t\t\t<div class="has-margin-top-0">\n\t\t\t\t\t<span>${t[o].name}: </span>\n\t\t\t\t\t<span>${t[o].price} &#8381;</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<img src="${t[o].image}" alt="Иконка услуги" />\n\t\t`}setMainModalTitle(t){t.textContent="Услуги"}createAndShowMainModalNotification(){S("[data-notification='body']","Услуги отсутствуют","error")}}function _(t){const e=t.validity.tooShort,o=t.validity.tooLong,n=t.validity.patternMismatch,a=t.validity.valueMissing;let i="";return(e||o||n)&&(i=t.title),a&&(i="Заполните поле"),"radio"===t.type&&(i="Выберите кто вы"),i}function b(t,e,o){let n;n="radio"===e.type?document.querySelector(`${o} .form__radios .form__field-error`):e.parentElement.querySelector(".form__field-error"),n.textContent=t}function y(t,e){t?e.classList.add("form__field-control--is-invalid"):e.classList.remove("form__field-control--is-invalid")}class L{constructor(t,e){this.dbServicesObj=t,this.dbMastersObj=e}createMainModal(t){const{modal:e,modalDivForScroll:o,modalContent:n,modalTitle:a,modalList:i,modalCloseButton:s}=this.createMainModalStructure();return e.setAttribute("data-modal","show-appointment"),this.createMainModalListItems(i,t),a.textContent="Информация о записи",n.append(a,i,s),o.append(n),e.append(o),e}createMainModalStructure(){const t=document.createElement("dialog"),e=document.createElement("div"),o=document.createElement("div"),n=document.createElement("h2"),a=document.createElement("ul"),i=document.createElement("button");return t.classList.add("app__modal","modal"),e.classList.add("modal__content-wrapper"),o.classList.add("modal__content"),n.classList.add("visually-hidden"),a.classList.add("modal__content-list","content-list","content-list--flex"),i.classList.add("modal__content-close-button"),i.setAttribute("type","button"),i.setAttribute("data-action-button","close"),i.innerHTML='\n\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path fill="#010101" fill-rule="evenodd" d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960S64 759.4 64 512S264.6 64 512 64m0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372s372-166.6 372-372s-166.6-372-372-372m128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254L384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019a.199.199 0 0 1-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"/></svg>\n\t\t\t\t',{modal:t,modalDivForScroll:e,modalContent:o,modalTitle:n,modalList:a,modalCloseButton:i}}createMainModalListItems(t,e){const{dateFromNeededTableCell:o,timeFromNeededTableCell:n,appointmentClientName:a,appointmentClientPhone:i,serviceName:s,servicePrice:l,masterFullName:c}=this.getAppointmentDataFromStorage(e);t.innerHTML=`\n\t\t\t<li><span>Клиент: </span><span>${a}</span></li>\n\t\t\t<li><span>Номер телефона: </span><span>${i}</span></li>\n\t\t\t<li><span>Дата: </span><span>${o}</span></li>\n\t\t\t<li><span>Время: </span><span>${n}</span></li>\n\t\t\t<li><span>Услуга: </span><span>${s}</span></li>\n\t\t\t<li><span>Мастер: </span><span>${c}</span></li>\n\t\t\t<li><span>Стоимость: </span><span>${l}</span></li>\n\t\t\t<li>\n\t\t\t\t<button class="content-list__delete-button button button--black-text button--wide" type="button">Удалить</button>\n\t\t\t</li>\n\t\t`}getAppointmentDataFromStorage(t){const o=e(),n=t.getAttribute("data-table-date"),a=t.getAttribute("data-table-time"),i=JSON.parse(o.getItem("appointments")),s=JSON.parse(o.getItem("addedServices")),l=JSON.parse(o.getItem("addedMasters")),c=i.find((t=>t.date===n&&t.time===a)),r=+c.service,d=+c.master,m=c["name-client"],u=c["phone-client"];let p,h,f,g=!1,S=!1;return this.dbServicesObj.forEach((t=>{t.id===r&&(p=t.name,h=t.price,g=!0)})),!g&&s&&s.forEach((t=>{+t.id===r&&(p=t.name,h=t.price)})),this.dbMastersObj.forEach((t=>{t.id===d&&(f=`${t.name} ${t.surname}`,S=!0)})),!S&&l&&l.forEach((t=>{+t.id===d&&(f=`${t.name} ${t.surname}`)})),{dateFromNeededTableCell:n,timeFromNeededTableCell:a,appointmentClientName:m,appointmentClientPhone:u,serviceName:p,servicePrice:h,masterFullName:f}}showMainModal(t){const e=this.createMainModal(t),o=e.querySelector(".content-list__delete-button"),a=e.querySelector("[data-action-button='close']");document.body.append(e),e.showModal(),n(),this.closeMainModal(e,a),o.addEventListener("click",(()=>{this.showDeleteModal(e,t)}))}showDeleteModal(t,e){const o=document.querySelector("[data-modal='delete']"),n=o.querySelector("h2"),i=o.querySelector("p"),s=o.querySelector("[data-confirm-button='yes']"),l=o.querySelector("[data-confirm-button='no']"),c=o.querySelector("[data-action-button='close']");n.textContent="Удаление записи",i.textContent="Вы уверены, что хотите удалить запись?",o.showModal(),this.closeDeleteModal(o,l,c),s.onclick=()=>{this.deleteAppointmentInStorage(e),o.close(),a(),t.remove()}}closeDeleteModal(t,e,o){t.onclick=e=>{let{currentTarget:o,target:n}=e;n===o&&t.close()},o.onclick=()=>{t.close()},e.onclick=()=>{t.close()}}deleteAppointmentInStorage(t){const o=e(),n=JSON.parse(o.getItem("appointments")),{dateFromNeededTableCell:a,timeFromNeededTableCell:i}=this.getAppointmentDataFromStorage(t);let s=[...n];for(let t=0;t<s.length;t++)s[t].date===a&&s[t].time===i&&(s=s.filter((e=>e!==s[t])));t.classList.remove("schedule-appointment"),t.querySelector("div").textContent="",t.onclick=()=>{},0===s.length?o.removeItem("appointments"):o.setItem("appointments",JSON.stringify(s))}showAddModal(){const t=document.querySelector("[data-modal='create-appointment']"),e=t.querySelector("[data-action-button='close']"),o=t.querySelector("[data-custom-select='service']"),a=t.querySelector("[data-custom-select='master']"),i=t.querySelector("[data-custom-select='date']"),s=t.querySelector("[data-custom-select='time']");this.createAddModalServicesSelectListItems(o),this.createAddModalMastersSelectListItems(a),this.createAddModalDatesSelectListItems(i),this.addModalSelectDropdown(t,o),this.addModalSelectDropdown(t,a),this.addModalSelectDropdown(t,i),this.addModalSelectDropdown(t,s),t.showModal(),n(),this.validateAddModalForm(t,o,a,i),this.closeAddModalSelectDropdownWithBackdropClick(t),this.closeAddModal(t,e,o,a,i)}createAddModalServicesSelectListItems(t){const e=new M(this.dbServicesObj).createMainModal().querySelectorAll("li"),o=t.querySelector(".content-form__field-select-list");0===e.length?o.innerHTML='<li class="content-form__field-select-list-item">Услуги отсутствуют</li>':e.forEach((t=>{const e=t.querySelector("div span:first-child").textContent.slice(0,-2),n=t.getAttribute("data-value"),a=document.createElement("li");a.textContent=e,a.classList.add("content-form__field-select-list-item"),a.setAttribute("data-value",n),o.append(a)}))}createAddModalMastersSelectListItems(t){const e=new v(this.dbMastersObj).createMainModal().querySelectorAll("li"),o=t.querySelector(".content-form__field-select-list");0===e.length?o.innerHTML='<li class="content-form__field-select-list-item">Мастера отсутствуют</li>':e.forEach((t=>{const e=t.querySelector("div span").textContent,n=t.getAttribute("data-value"),a=document.createElement("li");a.textContent=e,a.classList.add("content-form__field-select-list-item"),a.setAttribute("data-value",n),o.append(a)}))}createAddModalDatesSelectListItems(t){const e=document.querySelectorAll(".schedule-column-header"),o=t.querySelector(".content-form__field-select-list");e.forEach(((t,e)=>{const n=t.querySelector(".schedule-column-header__month-day").textContent,a=t.querySelector(".schedule-column-header__week-day").textContent,i=document.createElement("li");i.textContent=`${n}, ${a}`,i.classList.add("content-form__field-select-list-item"),i.setAttribute("data-value",w[e].replaceAll(".","-")),o.append(i)}))}addModalSelectDropdown(t,e){const o=e.querySelector(".content-form__field-select-button"),n=e.querySelector(".content-form__field-select-list"),a=n.querySelectorAll(".content-form__field-select-list-item");o.onclick=()=>{const e=t.querySelector(".content-form__field-select-list--is-open"),a=t.querySelector(".content-form__field-select-button--is-active");e&&e!==n&&e.classList.remove("content-form__field-select-list--is-open"),a&&a!==o&&a.classList.remove("content-form__field-select-button--is-active"),n.style.width=getComputedStyle(o).width,n.classList.toggle("content-form__field-select-list--is-open"),o.classList.toggle("content-form__field-select-button--is-active")},o.textContent=a[0].textContent,o.setAttribute("data-value",a[0].getAttribute("data-value")),a.forEach((t=>{t.onclick=()=>{const e=t.getAttribute("data-value");o.setAttribute("data-value",e),o.textContent=t.textContent,o.classList.remove("content-form__field-select-button--is-active"),n.classList.remove("content-form__field-select-list--is-open")}}))}closeMainModal(t,e){i(t,e)}clearSelect(t){t.querySelector(".content-form__field-select-list").innerHTML=""}closeAddModalSelectDropdownWithBackdropClick(t){t.querySelector(".modal__content-wrapper").onclick=e=>{const o=t.querySelector(".content-form__field-select-list--is-open");if(o){const t=o.previousElementSibling;t.contains(e.target)||o.querySelector(".content-form__field-select-list-item").contains(e.target)||(o.classList.remove("content-form__field-select-list--is-open"),t.classList.remove("content-form__field-select-button--is-active"))}}}closeAddModal(t,e,o,n,i){t.onclick=e=>{let{currentTarget:l,target:c}=e;c===l&&(t.close(),this.clearSelect(o),this.clearSelect(n),this.clearSelect(i),this.resetAddModalStates(t),a(),document.removeEventListener("keyup",s))},e.onclick=()=>{t.close(),this.clearSelect(o),this.clearSelect(n),this.clearSelect(i),this.resetAddModalStates(t),a(),document.removeEventListener("keyup",s)};const s=e=>{"Escape"===e.code&&(t.close(),this.clearSelect(o),this.clearSelect(n),this.clearSelect(i),this.resetAddModalStates(t),a(),document.removeEventListener("keyup",s))};document.addEventListener("keyup",s)}resetAddModalStates(t){const e=t.querySelector(".modal__content-form"),o=e.querySelectorAll("input"),n=e.querySelectorAll(".content-form__field-error"),a=e.querySelector(".content-form__field-select-list--is-open"),i=t.querySelector(".notification");if(a){const t=a.previousElementSibling;a.classList.remove("content-form__field-select-list--is-open"),t.classList.remove("content-form__field-select-button--is-active")}s(e,o,n,i)}validateAddModalForm(t,e,o,n){const a=t.querySelector(".modal__content-form"),i=a.querySelectorAll("input"),s=a.querySelector("[data-custom-select='service'] button"),l=a.querySelector("[data-custom-select='master'] button"),c=a.querySelector("button[type='submit']");i.forEach((t=>{!function(t){t.onblur=()=>{b(_(t),t,null),y(_(t),t)}}(t)}));((t,c)=>{t.onclick=t=>{t.preventDefault();let r=0,d=0;if(i.forEach((t=>{_(t)&&(b(_(t),t,null),y(_(t),t),r++)})),"Услуги отсутствуют"===s.textContent&&(d++,S("[data-notification='create-appointment']","Добавьте услугу","error")),"Мастера отсутствуют"===l.textContent&&(d++,S("[data-notification='create-appointment']","Добавьте мастера","error")),"Услуги отсутствуют"===s.textContent&&"Мастера отсутствуют"===l.textContent&&S("[data-notification='create-appointment']","Добавьте услугу и мастера","error"),0===r&&0===d){const t=new FormData(a);a.querySelectorAll(".content-form__field-select-button").forEach((e=>{const o=e.parentElement.getAttribute("data-custom-select"),n=e.getAttribute("data-value");t.append(o,n)}));const i=Object.fromEntries(t.entries());this.setAddedItemInStorage(i,c,e,o,n)}}})(c,t)}setAddedItemInStorage(t,o,n,i,s){const{date:l,time:c}=t,r=e(),d=[t];let m=!1;if(r.getItem("appointments")){const e=JSON.parse(r.getItem("appointments"));if(e.forEach((t=>{t.date===l&&t.time===c&&(S("[data-notification='create-appointment']","Данная дата и время уже заняты. Выберите другой день или время","error"),m=!0)})),m)return;e.push(t),r.setItem("appointments",JSON.stringify(e))}else r.setItem("appointments",JSON.stringify(d));o.close(),I(this.dbServicesObj,this.dbMastersObj),this.clearSelect(n),this.clearSelect(i),this.clearSelect(s),this.resetAddModalStates(o),a()}}const w=[];function I(t,o){const n=e(),a=JSON.parse(n.getItem("appointments")),i=JSON.parse(n.getItem("addedServices")),s=document.querySelectorAll("[data-table-time]"),l=Array.from(s);a&&a.forEach((e=>{const n=e.date,a=e.time,s=+e.service,c=l.find((t=>t.getAttribute("data-table-date")===n&&t.getAttribute("data-table-time")===a));let r=!1;t.forEach((t=>{if(t.id===s){const e=t.name;c.querySelector("div").textContent=e,r=!0}})),!r&&i&&i.forEach((t=>{if(+t.id===s){const e=t.name;c.querySelector("div").textContent=e}})),c.classList.add("schedule-appointment"),c.onclick=()=>{new L(t,o).showMainModal(c)}}))}!function(){const t=document.querySelectorAll(".schedule-column-header__month-day"),e=document.querySelectorAll(".schedule-column-header__week-day"),o=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],n=new Date,a=new Date(n);for(let i=0;i<o.length;i++)0===i?(t[i].textContent=n.toLocaleDateString("ru",{day:"numeric",month:"long"}),e[i].textContent=o[n.getDay()],w.push(n.toLocaleDateString("ru",{day:"2-digit",month:"2-digit",year:"2-digit"}))):(a.setDate(a.getDate()+1),t[i].textContent=a.toLocaleDateString("ru",{day:"numeric",month:"long"}),e[i].textContent=o[a.getDay()],w.push(a.toLocaleDateString("ru",{day:"2-digit",month:"2-digit",year:"2-digit"})))}(),function(){const t=JSON.parse(localStorage.getItem("appointments"));if(t){const e=w[0],o=+e.slice(-2),n=+e.slice(3,5),a=+e.slice(0,2);let i=[...t];for(let t=0;t<i.length;t++){const e=i[t].date,s=+e.slice(-2),l=+e.slice(3,5),c=+e.slice(0,2);let r=!1;o>s&&(i=i.filter((e=>e!==i[t])),r=!0),r||(n>l&&(i=i.filter((e=>e!==i[t])),r=!0),r||a>c&&(i=i.filter((e=>e!==i[t]))))}0===i.length?localStorage.removeItem("appointments"):localStorage.setItem("appointments",JSON.stringify(i))}}(),function(){const t=document.querySelectorAll(".schedule-row-header");for(let e=0;e<t.length;e++){const o=t[e].parentElement;for(let t=0;t<7;t++){o.querySelectorAll("td")[t].setAttribute("data-table-date",w[t].replaceAll(".","-"))}}}(),I(g,f);class q extends v{constructor(t){super(t)}createMainModal(){const{modal:t,modalDivForScroll:e,modalContent:o,modalTitle:n,modalList:a,modalCloseButton:i}=this.createMainModalStructure(),s=document.createElement("button"),l=document.createElement("li");return l.classList.add("content-list-item","content-list-item-add-button-wrapper","content-list-item--grid"),s.textContent="Добавить",s.classList.add("content-list-item__add-button","button","button--black-text"),s.setAttribute("type","button"),s.setAttribute("data-action-button","addListItem"),l.append(s),this.setMainModalAttr(t),this.createMainModalListItems(this.dbObject,a),a.append(l),1===a.children.length&&(a.style.display="block"),this.setMainModalTitle(n),o.append(n,a,i),e.append(o),t.append(e),t}createMainModalListItemStructure(t,e,o){e.innerHTML=`\n\t\t\t<div class="content-list-item__text">\n\t\t\t\t<span>${t[o].name} ${t[o].surname}</span>\n\t\t\t\t<div>\n\t\t\t\t\t<span>Стаж работы: </span>\n\t\t\t\t\t<span>${t[o].experience}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<img src="${t[o].image}" alt="Фотография мастера" />\n\t\t\t<button class="content-list-item__delete-button button button--black-text" type="button">Удалить</button>\n\t\t`}showMainModal(){const t=this.createMainModal(),e=t.querySelector("[data-action-button='addListItem']"),o=t.querySelector("[data-action-button='close']");document.body.append(t),t.showModal(),n(),e.closest("li").style.height=getComputedStyle(t.querySelector("li")).height,this.calculateHeightMainModal(t),this.closeMainModal(t,o),t.addEventListener("click",(e=>{if(e.target.classList.contains("content-list-item__delete-button")){const o=e.target.closest("li");this.showDeleteModal(o,t)}})),e.addEventListener("click",(()=>{this.showAddModal()}))}showDeleteModal(t,e){const o=document.querySelector("[data-modal='delete']"),n=o.querySelector("h2"),a=o.querySelector("p"),i=o.querySelector("[data-confirm-button='yes']"),s=o.querySelector("[data-confirm-button='no']"),l=o.querySelector("[data-action-button='close']");this.setDeleteModalTitleAndMessage(n,a),o.showModal(),this.closeDeleteModal(o,s,l),i.onclick=()=>{this.setDeletedItemInStorage(t),t.remove(),o.close(),e.remove(),this.showMainModal()}}setDeleteModalTitleAndMessage(t,e){t.textContent="Удаление мастера",e.textContent="Вы уверены, что хотите удалить мастера?"}closeDeleteModal(t,e,o){t.onclick=e=>{let{currentTarget:o,target:n}=e;n===o&&t.close()},o.onclick=()=>{t.close()},e.onclick=()=>{t.close()}}setDeletedItemInStorage(t){const o=t.querySelector("span").textContent,n=e();let a=[o];n.getItem("deletedMasters")?(a=JSON.parse(n.getItem("deletedMasters")),a.push(o),n.setItem("deletedMasters",JSON.stringify(a))):n.setItem("deletedMasters",JSON.stringify(a)),this.deleteEqualItemInStorage()}showAddModal(){const t=document.querySelector("[data-modal='add-master']"),e=t.querySelector(".content-form__field-dropdown-button img"),o=t.querySelector("[data-action-button='close']");this.addModalImagesDropdown(t),t.showModal(),this.validateAddModalForm(t,e),this.closeAddModal(t,o)}addModalImagesDropdown(t){const e=t.querySelector(".modal__content-form"),o=e.querySelector(".content-form__field-dropdown-button"),n=o.querySelector("img"),a=e.querySelector(".content-form__field-dropdown-list"),i=a.querySelectorAll(".content-form__field-dropdown-list-item");o.onclick=()=>{a.style.width=getComputedStyle(o).width,a.classList.toggle("content-form__field-dropdown-list--is-open"),o.classList.toggle("content-form__field-dropdown-button--is-active")},n.src=i[0].querySelector("img").src,n.setAttribute("data-image",i[0].querySelector("img").getAttribute("data-image")),i.forEach((t=>{t.onclick=()=>{const e=t.querySelector("img");n.src=e.src,n.setAttribute("data-image",e.getAttribute("data-image")),a.classList.remove("content-form__field-dropdown-list--is-open"),o.classList.remove("content-form__field-dropdown-button--is-active")}})),t.querySelector(".modal__content-wrapper").onclick=t=>{o.contains(t.target)||a.querySelector(".content-form__field-dropdown-list-item").contains(t.target)||(a.classList.remove("content-form__field-dropdown-list--is-open"),o.classList.remove("content-form__field-dropdown-button--is-active"))}}closeAddModal(t,e){t.onclick=e=>{let{currentTarget:n,target:a}=e;a===n&&(t.close(),this.resetAddModalStates(t),document.removeEventListener("keyup",o))},e.onclick=()=>{t.close(),this.resetAddModalStates(t),document.removeEventListener("keyup",o)};const o=e=>{"Escape"===e.code&&(this.resetAddModalStates(t),document.removeEventListener("keyup",o))};document.addEventListener("keyup",o)}resetAddModalStates(t){const e=t.querySelector(".modal__content-form"),o=e.querySelectorAll("input"),n=e.querySelectorAll(".content-form__field-error"),a=e.querySelector(".content-form__field-dropdown-list--is-open"),i=t.querySelector(".notification");a&&a.classList.remove("content-form__field-dropdown-list--is-open"),s(e,o,n,i)}validateAddModalForm(t,e){const o=t.querySelector(".modal__content-form"),n=o.querySelectorAll("input"),a=o.querySelector("button[type='submit']");n.forEach((t=>{!function(t){t.onblur=()=>{b(_(t),t,null),y(_(t),t)}}(t)}));((t,a)=>{t.onclick=t=>{t.preventDefault();let i=0;if(n.forEach((t=>{_(t)&&(b(_(t),t,null),y(_(t),t),i++)})),0===i){const t=new FormData(o);t.append("image",h[e.getAttribute("data-image")]),t.append("id",(1e5*Math.random().toFixed(5)).toFixed(0));const n=Object.fromEntries(t.entries());this.setAddedItemInStorage(n,a)}}})(a,t)}setAddedItemInStorage(t,o){const{name:n,surname:a}=t,i=`${n} ${a}`,s=e(),l=JSON.parse(s.getItem("deletedMasters")),c=document.querySelector("[data-modal='masters']"),r=[t];let d=!1;if(l?l.forEach((t=>{t===i&&(S("[data-notification='add-master']",'Данный мастер был добавлен изначально, но вы его удалили. Для сброса изменений нажмите кнопку "Сбросить"',"error"),d=!0)})):f.forEach((t=>{`${t.name} ${t.surname}`===i&&(S("[data-notification='add-master']","Данный мастер уже добавлен","error"),d=!0)})),!d){if(s.getItem("addedMasters")){const e=JSON.parse(s.getItem("addedMasters"));if(e.forEach((t=>{`${t.name} ${t.surname}`===i&&(S("[data-notification='add-master']","Данный мастер уже добавлен","error"),d=!0)})),d)return;e.push(t),s.setItem("addedMasters",JSON.stringify(e))}else s.setItem("addedMasters",JSON.stringify(r));this.deleteEqualItemInStorage(),o.close(),this.resetAddModalStates(o),c.remove(),this.showMainModal()}}deleteEqualItemInStorage(){const t=e(),o=JSON.parse(t.getItem("deletedMasters")),n=JSON.parse(t.getItem("addedMasters"));if(o&&n)for(let e=0;e<o.length;e++)for(let a=0;a<n.length;a++)if(o[e]===`${n[a].name} ${n[a].surname}`){const i=o.filter((t=>t!==`${n[a].name} ${n[a].surname}`)),s=n.filter((t=>`${t.name} ${t.surname}`!==o[e]));0===i.length?t.removeItem("deletedMasters"):t.setItem("deletedMasters",JSON.stringify(i)),0===s.length?t.removeItem("addedMasters"):t.setItem("addedMasters",JSON.stringify(s))}}}class A extends q{constructor(t){super(t)}setMainModalAttr(t){t.setAttribute("data-modal","services")}createMainModalListItems(t,o){const n=JSON.parse(e().getItem("deletedServices")),a=JSON.parse(e().getItem("addedServices"));for(let e=0;e<t.length;e++){let a=!1;if(n)for(let o=0;o<n.length;o++)if(t[e].name===n[o]){a=!0;break}a||this.createMainModalListItem(t,o,e)}if(a)for(let t=0;t<a.length;t++)this.createMainModalListItem(a,o,t)}createMainModalListItemStructure(t,e,o){e.innerHTML=`\n\t\t\t<div class="content-list-item__text">\n\t\t\t\t<div class="has-margin-top-0">\n\t\t\t\t\t<span>${t[o].name}: </span>\n\t\t\t\t\t<span>${t[o].price} &#8381;</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<img src="${t[o].image}" alt="Иконка услуги" />\n\t\t\t<button class="content-list-item__delete-button button button--black-text" type="button">Удалить</button>\n\t\t`}setMainModalTitle(t){t.textContent="Услуги"}createAndShowMainModalNotification(){S("[data-notification='body']","Услуги отсутствуют","error")}setDeleteModalTitleAndMessage(t,e){t.textContent="Удаление услуги",e.textContent="Вы уверены, что хотите удалить услугу?"}setDeletedItemInStorage(t){const o=t.querySelector("span").textContent.slice(0,-2),n=e();let a=[o];n.getItem("deletedServices")?(a=JSON.parse(n.getItem("deletedServices")),a.push(o),n.setItem("deletedServices",JSON.stringify(a))):n.setItem("deletedServices",JSON.stringify(a)),this.deleteEqualItemInStorage()}showAddModal(){const t=document.querySelector("[data-modal='add-service']"),e=t.querySelector(".content-form__field-dropdown-button img"),o=t.querySelector("[data-action-button='close']");this.addModalImagesDropdown(t),t.showModal(),this.validateAddModalForm(t,e),this.closeAddModal(t,o)}setAddedItemInStorage(t,o){const{name:n}=t,a=e(),i=JSON.parse(a.getItem("deletedServices")),s=document.querySelector("[data-modal='services']"),l=[t];let c=!1;if(i?i.forEach((t=>{t===n&&(S("[data-notification='add-service']",'Данная услуга была добавлена изначально, но вы ее удалили. Для сброса изменений нажмите кнопку "Сбросить"',"error"),c=!0)})):g.forEach((t=>{t.name===n&&(S("[data-notification='add-service']","Данная услуга уже добавлена","error"),c=!0)})),!c){if(a.getItem("addedServices")){const e=JSON.parse(a.getItem("addedServices"));if(e.forEach((t=>{t.name===n&&(S("[data-notification='add-service']","Данная услуга уже добавлена","error"),c=!0)})),c)return;e.push(t),a.setItem("addedServices",JSON.stringify(e))}else a.setItem("addedServices",JSON.stringify(l));this.deleteEqualItemInStorage(),o.close(),this.resetAddModalStates(o),s.remove(),this.showMainModal()}}deleteEqualItemInStorage(){const t=e(),o=JSON.parse(t.getItem("deletedServices")),n=JSON.parse(t.getItem("addedServices"));if(o&&n)for(let e=0;e<o.length;e++)for(let a=0;a<n.length;a++)if(o[e]===n[a].name){const i=o.filter((t=>t!==n[a].name)),s=n.filter((t=>t.name!==o[e]));0===i.length?t.removeItem("deletedServices"):t.setItem("deletedServices",JSON.stringify(i)),0===s.length?t.removeItem("addedServices"):t.setItem("addedServices",JSON.stringify(s))}}}const x=document.querySelector("[data-action-button='services']"),E=document.querySelector("[data-action-button='masters']"),k=document.querySelector("[data-action-button='createAppointment']"),C=document.querySelector("[data-action-button='reset']"),N=document.querySelector("[data-action-button='logout']"),$=document.querySelector("[data-mobile-action-button='services']"),O=document.querySelector("[data-mobile-action-button='masters']"),D=document.querySelector("[data-mobile-action-button='createAppointment']"),T=document.querySelector("[data-mobile-action-button='reset']"),J=document.querySelector("[data-mobile-action-button='logout']");function F(e,o,n){e.addEventListener("click",(()=>{let e=o;"admin"===t()&&(e=n),e.showMainModal()}))}function H(t,e){t.addEventListener("click",(()=>{e.showAddModal()}))}function j(t){t.addEventListener("click",(()=>{const t=e();t.removeItem("deletedServices"),t.removeItem("deletedMasters"),t.removeItem("addedServices"),t.removeItem("addedMasters"),t.removeItem("appointments")}))}function B(t){t.addEventListener("click",(()=>{e().removeItem("online"),window.location.assign("/index.html")}))}F(x,new M(g),new A(g)),F(E,new v(f),new q(f)),F($,new M(g),new A(g)),F(O,new v(f),new q(f)),H(k,new L(g,f)),H(D,new L(g,f)),j(C),j(T),B(N),B(J);o(423)})()})();